const debounce=(t,e)=>{let n;return function(){const o=this,r=arguments;clearTimeout(n),n=setTimeout(()=>t.apply(o,r),e)}},getCartHashKey=function(){if(wc_cart_fragments_params){const t=wc_cart_fragments_params.cart_hash_key;try{const e=localStorage.getItem(t),n=sessionStorage.getItem(t);return e||(n||null)}catch(t){}}},isCartEmpty=function(){return null===getCartHashKey()&&"0"===bento_wordpress_sdk_params.woocommerce_cart_count},isValidEmail=function(t){return"string"==typeof t&&/[^\s@]+@[^\s@]+\.[^\s@]+/.test(t)},identifyUser=function(){const t=bento$("#billing_email").val(),e=isValidEmail(t)?t:null;"string"==typeof e?bento.identify(e):bento_wordpress_sdk_params.user_logged_in&&bento.identify(bento_wordpress_sdk_params.user_email)},onEmailInputChange=debounce((function(){identifyUser()}),500),sendBentoEventWithCart=debounce((function(t){identifyUser();bento$.get(bento_wordpress_sdk_params.ajax_url,{action:"bento_get_cart_items"},(function(e){bento.track(t,{cart:{items:JSON.parse(e)}})}))}),500);!function(t){"undefined"!=typeof bento$&&bento$((function(){let e=null===getCartHashKey()&&"0"===bento_wordpress_sdk_params.woocommerce_cart_count;bento_wordpress_sdk_params.woocommerce_enabled&&(bento$(document.body).on("added_to_cart",()=>{e?(e=!1,sendBentoEventWithCart("$CartCreated")):sendBentoEventWithCart("$CartUpdated")}),bento$(document.body).on("updated_cart_totals removed_from_cart",()=>{sendBentoEventWithCart("$CartUpdated")}),t("form.woocommerce-checkout").length>0&&sendBentoEventWithCart("$StartedCheckout"),bento$("#billing_email").bind("blur",onEmailInputChange)),bento.view()}))}(jQuery);