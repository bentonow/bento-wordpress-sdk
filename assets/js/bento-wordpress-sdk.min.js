const debounce=(e,t)=>{let n;return function(){const o=this,r=arguments;clearTimeout(n),n=setTimeout(()=>e.apply(o,r),t)}},getCartHashKey=function(){if(wc_cart_fragments_params){const e=wc_cart_fragments_params.cart_hash_key;try{const t=localStorage.getItem(e),n=sessionStorage.getItem(e);return t||(n||null)}catch(e){}}},isCartEmpty=function(){return null===getCartHashKey()&&"0"===bento_wordpress_sdk_params.woocommerce_cart_count},isValidEmail=function(e){return"string"==typeof e&&/[^\s@]+@[^\s@]+\.[^\s@]+/.test(e)},identifyUser=function(){const e=bento$("#billing_email").val(),t=isValidEmail(e)?e:null;"string"==typeof t?bento.identify(t):bento_wordpress_sdk_params.user_logged_in&&bento.identify(bento_wordpress_sdk_params.user_email)},onEmailInputChange=debounce((function(){identifyUser()}),500),sendBentoEventWithCart=debounce((function(e){identifyUser();bento$.get(bento_wordpress_sdk_params.ajax_url,{action:"bento_get_cart_items"},(function(t){bento.track(e,JSON.parse(t))}))}),500);!function(e){"undefined"!=typeof bento$&&bento$((function(){let t=null===getCartHashKey()&&"0"===bento_wordpress_sdk_params.woocommerce_cart_count;bento_wordpress_sdk_params.woocommerce_enabled&&(bento$(document.body).on("added_to_cart",()=>{t&&(t=!1,sendBentoEventWithCart("$woocommerceCartCreated"))}),bento$(document.body).on("updated_cart_totals added_to_cart removed_from_cart",()=>{sendBentoEventWithCart("$woocommerceCartUpdated")}),e(".woocommerce-checkout").length>0&&sendBentoEventWithCart("$woocommerceStartedCheckout"),bento$("#billing_email").bind("blur",onEmailInputChange)),bento.view()}))}(jQuery);