const debounce=(e,t)=>{let o;return function(){const n=this,r=arguments;clearTimeout(o),o=setTimeout(()=>e.apply(n,r),t)}},getCartHashKey=function(){if(wc_cart_fragments_params){const e=wc_cart_fragments_params.cart_hash_key;try{const t=localStorage.getItem(e),o=sessionStorage.getItem(e);return t||(o||null)}catch(e){}}},isCartEmpty=function(){return null===getCartHashKey()&&"0"===bento_wordpress_sdk_params.woocommerce_cart_count},sendBentoEventWithCart=function(e){bento$.get(bento_wordpress_sdk_params.ajax_url,{action:"bento_get_cart_items"},(function(t){bento.track(e,JSON.parse(t))}))},isValidEmail=function(e){return"string"==typeof e&&/[^\s@]+@[^\s@]+\.[^\s@]+/.test(e)},identifyUser=function(){const e=bento$("#billing_email").val(),t=isValidEmail(e)?e:null;"string"==typeof t?bento.identify(t):bento_wordpress_sdk_params.user_logged_in&&bento.identify(bento_wordpress_sdk_params.user_email)},onEmailInputChange=debounce((function(){identifyUser()}),500),cartCreatedEvent=debounce((function(){console.log("$woocommerceCartCreated"),identifyUser(),sendBentoEventWithCart("$woocommerceCartCreated")}),500),cartUpdatedEvent=debounce((function(){console.log("$woocommerceCartUpdated"),identifyUser(),sendBentoEventWithCart("$woocommerceCartUpdated")}),500),startedCheckoutEvent=debounce((function(){console.log("$woocommerceStartedCheckout"),identifyUser(),sendBentoEventWithCart("$woocommerceStartedCheckout")}),500);!function(e){"undefined"!=typeof bento$&&bento$((function(){let t=null===getCartHashKey()&&"0"===bento_wordpress_sdk_params.woocommerce_cart_count;bento_wordpress_sdk_params.woocommerce_enabled&&(bento$(document.body).on("added_to_cart",()=>{t&&(t=!1,cartCreatedEvent())}),bento$(document.body).on("updated_cart_totals added_to_cart removed_from_cart",()=>{cartUpdatedEvent()}),e(".woocommerce-checkout").length>0&&startedCheckoutEvent(),bento$("#billing_email").bind("blur",onEmailInputChange)),bento.view()}))}(jQuery);